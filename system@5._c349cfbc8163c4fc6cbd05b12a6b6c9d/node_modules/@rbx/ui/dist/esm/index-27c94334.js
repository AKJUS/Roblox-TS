import e,{useRef as t,useMemo as s,createContext as n,useContext as o,forwardRef as r,createElement as c}from"react";import{s as i,i as a,g as u}from"./emotion-serialize.esm-3f263cb4.js";import{__unsafe_useEmotionCache as l}from"@emotion/react";const d=Object.fromEntries?Object.fromEntries:e=>{if(!e||!e[Symbol.iterator])throw new Error("Object.fromEntries() requires a single iterable argument");const t={};return Object.keys(e).forEach((s=>{const[n,o]=e[s];t[n]=o})),t};function f(e){return Object.keys(e)}function m(e,t){if(!e)throw new Error(t)}function p(e,t){return t}const y=e=>{const t=e.length;let s=0,n="";for(;s<t;s++){const t=e[s];if(null==t)continue;let o;switch(typeof t){case"boolean":break;case"object":if(Array.isArray(t))o=y(t);else{m(!p(0,!1)),"production"!==process.env.NODE_ENV&&void 0!==t.styles&&void 0!==t.name&&console.error("You have passed styles created with `css` from `@emotion/react` package to the `cx`.\n`cx` is meant to compose class names (strings) so you should convert those styles to a class name by passing them to the `css` received from <ClassNames/> component."),o="";for(const e in t)t[e]&&e&&(o&&(o+=" "),o+=e)}break;default:o=t}o&&(n&&(n+=" "),n+=o)}return n};const{createCssAndCx:h}={createCssAndCx:function(e){const{cache:t}=e,s=(...e)=>{const s=i(e,t.registered);a(t,s,!1);const n=`${t.key}-${s.name}`;{const s=e[0];(function(e){return e instanceof Object&&!("styles"in e)&&!("length"in e)&&!("__emotion_styles"in e)})(s)&&b.saveClassNameCSSObjectMapping(t,n,s)}return n};return{css:s,cx:(...e)=>{const n=y(e),o=b.fixClassName(t,n,s);return function(e,t,s){const n=[],o=u(e,n,s);return n.length<2?s:o+t(n)}(t.registered,s,o)}}}};function v(e){const{useCache:s}=e;return{useCssAndCx:function(){const e=s(),{css:n,cx:o}=function(e,s){var n;const o=t();return(!o.current||s.length!==(null===(n=o.current.prevDeps)||void 0===n?void 0:n.length)||o.current.prevDeps.map(((e,t)=>e===s[t])).indexOf(!1)>=0)&&(o.current={v:e(),prevDeps:[...s]}),o.current.v}((()=>h({cache:e})),[e]);return{css:n,cx:o}}}}const b=(()=>{const e=new WeakMap;return{saveClassNameCSSObjectMapping:(t,s,n)=>{let o=e.get(t);void 0===o&&(o=new Map,e.set(t,o)),o.set(s,n)},fixClassName:(t,s,n)=>{const o=e.get(t);return y(function(e){let t=!1;return e.map((([e,s])=>{if(void 0===s)return e;let n;if(t)n={"&&":s};else{n=e;for(const e in s)if(e.startsWith("@media")){t=!0;break}}return n}))}(s.split(" ").map((e=>[e,null==o?void 0:o.get(e)]))).map((e=>"string"==typeof e?e:n(e))))}}})();function g(e){if(!(e instanceof Object)||"function"==typeof e)return e;const t=[];for(const s in e){const n=e[s],o=typeof n;if("string"!==o&&("number"!==o||isNaN(n))&&"boolean"!==o&&null!=n)return e;t.push(`${s}:${o}_${n}`)}return"xSqLiJdLMd9s"+t.join("|")}function O(e,t,s){if(!(t instanceof Object))return e;const n={};return f(e).forEach((o=>n[o]=s(e[o],t[o]))),f(t).forEach((s=>{if(s in e)return;const o=t[s];"string"==typeof o&&(n[s]=o)})),n}const j=({classes:e,theme:t,muiStyleOverridesParams:n,css:o,cx:r,name:c})=>{var i,a;if("makeStyle no name"!==c){if(void 0!==n&&void 0===c)throw new Error("To use muiStyleOverridesParams, you must specify a name using .withName('MyComponent')")}else c=void 0;let u;try{u=void 0===c?void 0:(null===(a=null===(i=t.components)||void 0===i?void 0:i[c])||void 0===a?void 0:a.styleOverrides)||void 0}catch(e){}const l=s((()=>{if(void 0===u)return;const e={};for(const s in u){const r=u[s];r instanceof Object&&(e[s]=o("function"==typeof r?r(Object.assign({theme:t,ownerState:null==n?void 0:n.ownerState},null==n?void 0:n.props)):r))}return e}),[u,g(null==n?void 0:n.props),g(null==n?void 0:n.ownerState),o]);return{classes:e=s((()=>O(e,l,r)),[e,l,r])}};let S=0;function w(e){const{useTheme:t,cache:n}=e,{useCache:o}=$({cacheProvidedAtInception:n}),{useCssAndCx:r}=v({useCache:o});return{makeStyles:function(e){const{name:n,uniqId:c=""+S++}=null!=e?e:{},i="object"!=typeof n?n:Object.keys(n)[0];return function(e){const n="function"==typeof e?e:()=>e;return function(e,a){const u=t();let{css:l,cx:y}=r();const h=o();let v=s((()=>{const t={},s="undefined"!=typeof Proxy&&new Proxy({},{get:(e,s)=>("symbol"==typeof s&&m(!1),t[s]=`${h.key}-${c}${void 0!==i?`-${i}`:""}-${s}-ref`)}),o=n(u,e,s||{}),r=d(f(o).map((e=>{const s=o[e];return s.label||(s.label=`${void 0!==i?`${i}-`:""}${e}`),[e,`${l(s)}${p(0,e in t)?` ${t[e]}`:""}`]})));return f(t).forEach((e=>{e in r||(r[e]=t[e])})),r}),[h,l,y,u,g(e)]);{const e=null==a?void 0:a.props.classes;v=s((()=>O(v,e,y)),[v,g(e),y])}{const e=j({classes:v,css:l,cx:y,name:null!=i?i:"makeStyle no name",idOfUseStyles:c,muiStyleOverridesParams:a,theme:u});void 0!==e.classes&&(v=e.classes),void 0!==e.css&&(l=e.css),void 0!==e.cx&&(y=e.cx)}return{classes:v,theme:u,css:l,cx:y}}}},useStyles:function(){const e=t(),{css:s,cx:n}=r();return{theme:e,css:s,cx:n}}}}const x=n(void 0);function C(t){const{children:s,value:n}=t;return e.createElement(x.Provider,{value:n},s)}const{createUseCache:$}={createUseCache:function(e){const{cacheProvidedAtInception:t}=e;return{useCache:function(){var e;const s=l(),n=o(x),r=null!==(e=null!=t?t:n)&&void 0!==e?e:s;if(null===r)throw new Error(["In order to get SSR working with tss-react you need to explicitly provide an Emotion cache.","MUI users be aware: This is not an error strictly related to tss-react, with or without tss-react,","MUI needs an Emotion cache to be provided for SSR to work.","Here is the MUI documentation related to SSR setup: https://mui.com/material-ui/guides/server-rendering/","TSS provides helper that makes the process of setting up SSR easier: https://docs.tss-react.dev/ssr"].join("\n"));return r}}}};function E(e){return e.charAt(0).toUpperCase()+e.slice(1)}var N=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(s[n[o]]=e[n[o]])}return s};const k=new WeakMap,P="getClasses should only be used in conjunction with withStyles";function U(e){const t=e.classes;if(void 0===t)throw new Error(P);const s=k.get(t);if(void 0===s)throw new Error(P);return s}function A(e){const t={},s={};return Object.keys(e).forEach((n=>(n.startsWith("@media")?s:t)[n]=e[n])),Object.keys(s).forEach((e=>{const n=s[e];Object.keys(n).forEach((s=>{var o;return t[s]=Object.assign(Object.assign({},null!==(o=t[s])&&void 0!==o?o:{}),{[e]:n[s]})}))})),t}const _=(()=>{const e="object"==typeof document&&"function"==typeof(null===document||void 0===document?void 0:document.getElementById),t="undefined"!=typeof jest,s="undefined"!=typeof mocha,n="undefined"!=typeof __vitest_worker__;return!(e||t||s||n)})();var I=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(s[n[o]]=e[n[o]])}return s};function M(e){const{useContext:t,usePlugin:s,cache:n}=e,{useCache:o}=$({cacheProvidedAtInception:n}),{useCssAndCx:r}=v({useCache:o});return{tss:q({useContext:t,useCache:o,useCssAndCx:r,usePlugin:null!=s?s:({classes:e,cx:t,css:s})=>({classes:e,cx:t,css:s}),name:void 0,doesUseNestedSelectors:!1})}}let R=0;const T=[];function q(e){const{useContext:t,useCache:n,useCssAndCx:o,usePlugin:r,name:c,doesUseNestedSelectors:i}=e;return{withParams:()=>q(Object.assign({},e)),withName:t=>q(Object.assign(Object.assign({},e),{name:"object"!=typeof t?t:Object.keys(t)[0]})),withNestedSelectors:()=>q(Object.assign(Object.assign({},e),{doesUseNestedSelectors:!0})),create:e=>{const a="x"+R++,u="function"==typeof e?e:()=>e;return function(e){var l,y,h;const v=null!=e?e:{},{classesOverrides:b}=v,j=I(v,["classesOverrides"]),S=t(),{css:w,cx:x}=o(),C=n();let $=s((()=>{const t={},s=u(Object.assign(Object.assign(Object.assign({},e),S),i?{classes:"undefined"==typeof Proxy?{}:new Proxy({},{get:(e,s)=>{if("symbol"==typeof s&&m(!1),_){{let e=T.find((e=>e.name===c&&e.idOfUseStyles===a));void 0===e&&(e={name:c,idOfUseStyles:a,nestedSelectorRuleNames:new Set},T.push(e)),e.nestedSelectorRuleNames.add(s)}if(void 0!==T.find((e=>e.name===c&&e.idOfUseStyles!==a&&e.nestedSelectorRuleNames.has(s))))throw new Error([`tss-react: Duplicate nested selector "${s}" detected in ${void 0===c?`useStyles named "${c}"`:"anonymous useStyles function"}.`,"In SSR setups, this may lead to CSS class name collisions, causing nested selectors to target elements outside of the intended scope.",'Solution: Ensure each useStyles using nested selectors has a unique name. Use tss.withName("UniqueName").withNestedSelectors<...>()... to set a name.'].join("\n"))}return t[s]=`${C.key}-${a}${void 0!==c?`-${c}`:""}-${s}-ref`}})}:{})),n=d(f(s).map((e=>{const n=s[e];return n.label||(n.label=`${void 0!==c?`${c}-`:""}${e}`),[e,`${w(n)}${p(0,e in t)?` ${t[e]}`:""}`]})));return f(t).forEach((e=>{e in n||(n[e]=t[e])})),n}),[C,w,x,g(e),...Object.values(S)]);$=s((()=>O($,b,x)),[$,g(b),x]);const E=r(Object.assign(Object.assign({classes:$,css:w,cx:x,idOfUseStyles:a,name:c},S),j));return Object.assign({classes:null!==(l=E.classes)&&void 0!==l?l:$,css:null!==(y=E.css)&&void 0!==y?y:w,cx:null!==(h=E.cx)&&void 0!==h?h:x},S)}}}}function D(t){return Object.assign(Object.assign({},w(t)),function(t){const{useTheme:s,cache:n}=t,{makeStyles:o}=w({useTheme:s,cache:n});function i(t,s,n){const i="string"==typeof t?(()=>{const e=t,s=function(t){var{children:s}=t,n=N(t,["children"]);return c(e,n,s)};return Object.defineProperty(s,"name",{value:E(e)}),s})():t,a=(()=>{{const{name:e}=null!=n?n:{};if(void 0!==e)return"object"!=typeof e?e:Object.keys(e)[0]}let e;{const t=i.displayName;"string"==typeof t&&""!==t&&(e=t)}e:{if(void 0!==e)break e;const t=i.name;"string"==typeof t&&""!==t&&(e=t)}if(void 0!==e)return e=e.replace(/\$/g,"usd"),e=e.replace(/\(/g,"_").replace(/\)/g,"_"),e=e.replace(/[^a-zA-Z0-9-_]/g,"_"),e})(),u=o(Object.assign(Object.assign({},n),{name:a}))("function"==typeof s?(e,t,n)=>A(s(e,t,n)):A(s));function l(e){for(const t in e)if("root"!==t)return!0;return!1}const d=r((function(s,n){const{className:o,classes:r}=s,c=N(s,["className","classes"]),{classes:a,cx:d}=u(s,{props:s}),f=d(a.root,o);return k.set(a,Object.assign(Object.assign({},a),{root:f})),e.createElement(i,Object.assign({ref:n,className:l(a)?o:f},"string"==typeof t?{}:{classes:a},c))}));return void 0!==a&&(d.displayName=`${E(a)}WithStyles`,Object.defineProperty(d,"name",{value:d.displayName})),d}return i.getClasses=U,{withStyles:i}}(t))}const{tss:W}=M({useContext:()=>({})});W.create({});export{C as T,M as a,D as c,j as u};
